<!doctype html><html lang=en class=no-js><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=generator content="Hugo 0.101.0"><meta name=ROBOTS content="INDEX, FOLLOW"><link rel="shortcut icon" href=/favicons/favicon.ico><link rel=apple-touch-icon href=/docs/favicons/apple-touch-icon-180x180.png sizes=180x180><link rel=icon type=image/png href=/docs/favicons/favicon-16x16.png sizes=16x16><link rel=icon type=image/png href=/docs/favicons/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=/docs/favicons/android-36x36.png sizes=36x36><link rel=icon type=image/png href=/docs/favicons/android-48x48.png sizes=48x48><link rel=icon type=image/png href=/docs/favicons/android-72x72.png sizes=72x72><link rel=icon type=image/png href=/docs/favicons/android-96x196.png sizes=96x196><link rel=icon type=image/png href=/docs/favicons/android-144x144.png sizes=144x144><link rel=icon type=image/png href=/docs/favicons/android-192x192.png sizes=192x192><title>SCP | Vela</title><meta property="og:title" content="SCP"><meta property="og:description" content="Description This plugin is part of the OpenSSH suite of plugins which enables you to use the scp binary in a Vela pipeline.
Source Code: https://github.com/go-vela/vela-openssh
Registry: https://hub.docker.com/r/target/vela-scp
Usage Because the plugin is a thin wrapper around the scp binary, the syntax and parameters follow from the OpenSSH manual. The plugin will take care of some basic secrets identity management tasks for you, most importantly is that when an identity file is provided as a secret the plugin will place the file into the filesystem and change the permissions to match what the binary expects, and then add it to the list of identity files tried as part of authentication."><meta property="og:type" content="article"><meta property="og:url" content="https://go-vela.github.io/docs/plugins/registry/pipeline/scp/"><meta property="article:section" content="plugins"><meta property="article:modified_time" content="2022-03-08T10:43:11-08:00"><meta itemprop=name content="SCP"><meta itemprop=description content="Description This plugin is part of the OpenSSH suite of plugins which enables you to use the scp binary in a Vela pipeline.
Source Code: https://github.com/go-vela/vela-openssh
Registry: https://hub.docker.com/r/target/vela-scp
Usage Because the plugin is a thin wrapper around the scp binary, the syntax and parameters follow from the OpenSSH manual. The plugin will take care of some basic secrets identity management tasks for you, most importantly is that when an identity file is provided as a secret the plugin will place the file into the filesystem and change the permissions to match what the binary expects, and then add it to the list of identity files tried as part of authentication."><meta itemprop=dateModified content="2022-03-08T10:43:11-08:00"><meta itemprop=wordCount content="765"><meta itemprop=keywords content><meta name=twitter:card content="summary"><meta name=twitter:title content="SCP"><meta name=twitter:description content="Description This plugin is part of the OpenSSH suite of plugins which enables you to use the scp binary in a Vela pipeline.
Source Code: https://github.com/go-vela/vela-openssh
Registry: https://hub.docker.com/r/target/vela-scp
Usage Because the plugin is a thin wrapper around the scp binary, the syntax and parameters follow from the OpenSSH manual. The plugin will take care of some basic secrets identity management tasks for you, most importantly is that when an identity file is provided as a secret the plugin will place the file into the filesystem and change the permissions to match what the binary expects, and then add it to the list of identity files tried as part of authentication."><link rel=preload href=/docs/scss/main.min.667a6b764df308eb5ae9ec6894dabe3df779ad1af19352cfb06941b569cf046a.css as=style><link href=/docs/scss/main.min.667a6b764df308eb5ae9ec6894dabe3df779ad1af19352cfb06941b569cf046a.css rel=stylesheet integrity><script src=https://code.jquery.com/jquery-3.3.1.min.js integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin=anonymous></script><title>SCP | Vela</title></head><body class=td-page><header><nav class="js-navbar-scroll navbar navbar-expand navbar-dark flex-column flex-md-row td-navbar"><a class=navbar-brand href=/docs/><span class=navbar-logo><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1500 1500"><title>vela-inverse</title><polygon points="1477.22 329.54 1338.11 219.91 1349.56 43.16 1202.3 141.58 1037.73 76.07 1085.84 246.54 972.68 382.81 1149.67 389.74 1244.3 539.46 1305.58 373.27 1477.22 329.54" style="fill:#9e6bae"/><path d="M1174.75 635.12 757.57 1357.69a3.47 3.47.0 01-6 0L125.38 273.13a3.48 3.48.0 013-5.22H925.24l39.14-47.13L950.19 170.5H128.39A100.9 100.9.0 0041 321.84L667.19 1406.4a100.88 100.88.0 00174.74.0l391.61-678.27z" style="fill:#34c6f4"/><polygon points="1087.64 497.29 1038.27 495.36 754.56 986.75 395.9 365.54 288.13 365.54 754.56 1173.42 1117.58 544.66 1087.64 497.29" style="fill:#fff"/></svg></span><span class="text-uppercase font-weight-bold">Vela</span></a><div class="td-navbar-nav-scroll ml-md-auto" id=main_navbar><ul class="navbar-nav mt-2 mt-lg-0"><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=/docs/community/><span>Community</span></a></li><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=/docs/administration/><span>Administration</span></a></li><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=/docs/tour/><span>Tour</span></a></li><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=/docs/usage/><span>Usage</span></a></li><li class="nav-item mr-4 mb-2 mb-lg-0"><a class="nav-link active" href=/docs/plugins/><span class=active>Plugins</span></a></li><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=/docs/templates/><span>Templates</span></a></li><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=/docs/faq/><span>F.A.Q.</span></a></li><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=/docs/reference/><span>Reference</span></a></li></ul></div><div class="navbar-nav d-none d-lg-block"><div><div class="search -navbar" id=search1><input id=search1input type=text placeholder="Search site..." v-model=txt @blur=close() maxlength=50><div class=search-results :style="{'display': showresult?'block':'none'}"><a v-for="item in result" :href=item.url>{{ item.display }}</a></div></div><script src=https://cdnjs.cloudflare.com/ajax/libs/axios/0.18.0/axios.min.js integrity="sha256-mpnrJ5DpEZZkwkE1ZgkEQQJW/46CSEh/STrZKOB/qoM=" crossorigin=anonymous></script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/vue/2.5.17/vue.min.js integrity="sha256-FtWfRI+thWlNz2sB3SJbwKx5PgMyKIVgwHCTwa3biXc=" crossorigin=anonymous></script>
<script>let mounted=function(){document.getElementById("search1input").addEventListener("keyup",e=>{this.txt=e.target.value,this.search()}),axios.get("https://go-vela.github.io/docs/search/index.json").then(function(e){vuesearch1.bdd=e.data.results}).catch(function(e){console.log(e)})},close=function(){setTimeout(function(){vuesearch1.showresult=!1,vuesearch1.txt=""},300)},search=function(){clearTimeout(this.timeoutID),this.timeoutID=setTimeout(this.dosearch,500)},dosearch=function(){this.result=[];let s=this.txt.split(" "),n=[];s.forEach(function(e){e&&n.push(e)});let e,t;n.forEach(function(n){if(e=vuesearch1.bdd.filter(e=>e.content.indexOf(n.toLowerCase())!==-1),vuesearch1.result.length===0){vuesearch1.result=e.slice();return}t=[],vuesearch1.result.forEach(function(n){e.forEach(function(e){n.url===e.url&&t.push(n)})}),vuesearch1.result=t.slice()}),this.result=this.result.slice(0,10),this.result=this.result.sort(function(e,t){return(""+e.display).localeCompare(t.display)}),this.showresult=this.result.length>0},vuesearch1=new Vue({el:"#search1",data:{txt:"",timeoutID:0,showresult:!1,result:{},bdd:[]},mounted,methods:{close,search,dosearch}})</script></div></div></nav></header><div class="container-fluid td-outer"><div class=td-main><div class="row flex-xl-nowrap"><div class="col-12 col-md-3 col-xl-2 td-sidebar d-print-none"><div id=td-sidebar-menu class=td-sidebar__inner><form class="td-sidebar__search d-flex align-items-center"><div><div class="search -sidebar" id=search2><input id=search2input type=text placeholder="Search site..." v-model=txt @blur=close() maxlength=50><div class=search-results :style="{'display': showresult?'block':'none'}"><a v-for="item in result" :href=item.url>{{ item.display }}</a></div></div></div><script src=https://cdnjs.cloudflare.com/ajax/libs/axios/0.18.0/axios.min.js integrity="sha256-mpnrJ5DpEZZkwkE1ZgkEQQJW/46CSEh/STrZKOB/qoM=" crossorigin=anonymous></script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/vue/2.5.17/vue.min.js integrity="sha256-FtWfRI+thWlNz2sB3SJbwKx5PgMyKIVgwHCTwa3biXc=" crossorigin=anonymous></script>
<script>let mounted_sidebar=function(){document.getElementById("search2input").addEventListener("keyup",e=>{this.txt=e.target.value,this.search()}),axios.get("https://go-vela.github.io/docs/search/index.json").then(function(e){vuesearch2.bdd=e.data.results}).catch(function(e){console.log(e)})},close_sidebar=function(){setTimeout(function(){vuesearch2.showresult=!1,vuesearch2.txt=""},300)},dosearch_sidebar=function(){this.result=[];var e,t,s=this.txt.split(" "),n=[];s.forEach(function(e){e&&n.push(e)}),n.forEach(function(n){if(e=vuesearch2.bdd.filter(e=>e.content.indexOf(n.toLowerCase())!==-1),vuesearch2.result.length===0){vuesearch2.result=e.slice();return}t=[],vuesearch2.result.forEach(function(n){e.forEach(function(e){n.url===e.url&&t.push(n)})}),vuesearch2.result=t.slice()}),this.result=this.result.slice(0,10),this.result=this.result.sort(function(e,t){return(""+e.display).localeCompare(t.display)}),this.showresult=this.result.length>0},vuesearch2=new Vue({el:"#search2",data:{txt:"",timeoutID:0,showresult:!1,result:{},bdd:[]},mounted:mounted_sidebar,methods:{close:close_sidebar,search,dosearch:dosearch_sidebar}})</script><button class="btn btn-link td-sidebar__toggle d-md-none p-0 ml-3 fas fa-bars" type=button data-toggle=collapse data-target=#td-section-nav aria-controls=td-docs-nav aria-expanded=false aria-label="Toggle section navigation"></button></form><nav class="collapse td-sidebar-nav pt-2 pl-4" id=td-section-nav><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/docs/plugins/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__section">Plugins</a></li><ul><li class="collapse show" id=docsplugins><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/docs/plugins/registry/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__section">Registry</a></li><ul><li class="collapse show" id=docspluginsregistry><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/docs/plugins/registry/pipeline/ class="align-left pl-0 pr-2 active td-sidebar-link td-sidebar-link__section">Pipeline</a></li><ul><li class="collapse show" id=docspluginsregistrypipeline><a class="td-sidebar-link td-sidebar-link__page" id=m-docspluginsregistrypipelineansible href=/docs/plugins/registry/pipeline/ansible/>Ansible</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docspluginsregistrypipelineartifactory href=/docs/plugins/registry/pipeline/artifactory/>Artifactory</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docspluginsregistrypipelinebuild-summary href=/docs/plugins/registry/pipeline/build-summary/>Build Summary</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docspluginsregistrypipelinecaptains_log href=/docs/plugins/registry/pipeline/captains_log/>Captain's Log</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docspluginsregistrypipelinedocker href=/docs/plugins/registry/pipeline/docker/>Docker</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docspluginsregistrypipelinedownstream href=/docs/plugins/registry/pipeline/downstream/>Downstream</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docspluginsregistrypipelineemail href=/docs/plugins/registry/pipeline/email/>Email</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docspluginsregistrypipelinegit href=/docs/plugins/registry/pipeline/git/>Git</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docspluginsregistrypipelinehugo href=/docs/plugins/registry/pipeline/hugo/>Hugo</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docspluginsregistrypipelineinflux href=/docs/plugins/registry/pipeline/influx/>Influx</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docspluginsregistrypipelinekaniko href=/docs/plugins/registry/pipeline/kaniko/>Kaniko</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docspluginsregistrypipelinekubernetes href=/docs/plugins/registry/pipeline/kubernetes/>Kubernetes</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docspluginsregistrypipelinenpm href=/docs/plugins/registry/pipeline/npm/>npm</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docspluginsregistrypipelines3_cache href=/docs/plugins/registry/pipeline/s3_cache/>S3 Cache</a>
<a class="td-sidebar-link td-sidebar-link__page active" id=m-docspluginsregistrypipelinescp href=/docs/plugins/registry/pipeline/scp/>SCP</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docspluginsregistrypipelineslack href=/docs/plugins/registry/pipeline/slack/>Slack</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docspluginsregistrypipelinessh href=/docs/plugins/registry/pipeline/ssh/>SSH</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docspluginsregistrypipelineterraform href=/docs/plugins/registry/pipeline/terraform/>Terraform</a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/docs/plugins/registry/secret/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__section">Secret</a></li><ul><li class="collapse show" id=docspluginsregistrysecret><a class="td-sidebar-link td-sidebar-link__page" id=m-docspluginsregistrysecretvault href=/docs/plugins/registry/secret/vault/>Vault</a></li></ul></ul></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/docs/plugins/tutorials/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__section">Tutorials</a></li><ul><li class="collapse show" id=docspluginstutorials><a class="td-sidebar-link td-sidebar-link__page" id=m-docspluginstutorialsbash href=/docs/plugins/tutorials/bash/>Bash</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docspluginstutorialsgo href=/docs/plugins/tutorials/go/>Go</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docspluginstutorialskotlin href=/docs/plugins/tutorials/kotlin/>Kotlin</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docspluginstutorialsnode href=/docs/plugins/tutorials/node/>Node.js</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docspluginstutorialspython href=/docs/plugins/tutorials/python/>Python</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docspluginstutorialsruby href=/docs/plugins/tutorials/ruby/>Ruby</a></li></ul></ul></li></ul></ul></nav></div></div><div class="d-none d-xl-block col-xl-2 td-toc d-print-none"><div class="td-page-meta ml-2 pb-1 pt-2 mb-0"><a href=https://github.com/go-vela/docs/edit/master/content/plugins/registry/pipeline/scp.md target=_blank><i class="fa fa-edit fa-fw"></i> Edit this page</a>
<a href="https://github.com/go-vela/docs/issues/new?title=SCP" target=_blank><i class="fab fa-github fa-fw"></i> Create documentation issue</a></div></div><main class="col-12 col-md-9 col-xl-8 pl-md-5" role=main><nav aria-label=breadcrumb class="d-none d-md-block d-print-none"><ol class="breadcrumb spb-1"><li class=breadcrumb-item><a href=https://go-vela.github.io/docs/plugins/>Plugins</a></li><li class=breadcrumb-item><a href=https://go-vela.github.io/docs/plugins/registry/>Registry</a></li><li class=breadcrumb-item><a href=https://go-vela.github.io/docs/plugins/registry/pipeline/>Pipeline</a></li><li class="breadcrumb-item active" aria-current=page><a href=https://go-vela.github.io/docs/plugins/registry/pipeline/scp/>SCP</a></li></ol></nav><div class=td-content><h1>SCP</h1><h2 id=description>Description</h2><p>This plugin is part of the <a href=https://www.openssh.com/>OpenSSH</a> suite of plugins which enables you to use the <code>scp</code> binary in a Vela pipeline.</p><p>Source Code: <a href=https://github.com/go-vela/vela-openssh>https://github.com/go-vela/vela-openssh</a></p><p>Registry: <a href=https://hub.docker.com/r/target/vela-scp>https://hub.docker.com/r/target/vela-scp</a></p><h2 id=usage>Usage</h2><p>Because the plugin is a thin wrapper around the <a href=https://man.openbsd.org/scp><code>scp</code></a> binary, the syntax and parameters follow from the <a href=https://man.openbsd.org/scp>OpenSSH manual</a>. The plugin will take care of some basic secrets identity management tasks for you, most importantly is that when an identity file is provided as a secret the plugin will place the file into the filesystem and change the permissions to match what the binary expects, and then add it to the list of identity files tried as part of authentication. Additionally, if using a password or passphrase for authentication or for unlocking an identity file, the <a href=https://linux.die.net/man/1/sshpass><code>sshpass</code></a> binary will be used to provide those credentials without interactive user input.</p><blockquote><p><strong>NOTE:</strong></p><p>Users should refrain from using latest as the tag for images.</p><p>It is recommended to use a semantically versioned tag instead.</p></blockquote><h3 id=basic-usage>Basic usage</h3><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#204a87;font-weight:700>steps</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span>- <span style=color:#204a87;font-weight:700>name</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>scp basic usage</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#204a87;font-weight:700>image</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>target/vela-scp:latest</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#204a87;font-weight:700>pull</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>always</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#204a87;font-weight:700>parameters</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>source</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span>- <span style=color:#000>./relative/path/to/file/in/vela/workspace</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span>- <span style=color:#000>a_user_name@some_remote_host_name:/absolute/path/on/remote/system</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>target</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>a_different_user@some_other_host:~</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span></code></pre></div><h3 id=using-the-scp-schema-for-non-standard-ports>Using the <code>scp://</code> schema for non-standard ports</h3><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-diff data-lang=diff><span style=display:flex><span>steps:
</span></span><span style=display:flex><span>  - name: scp to non-standard port
</span></span><span style=display:flex><span>    image: target/vela-scp:latest
</span></span><span style=display:flex><span>    pull: always
</span></span><span style=display:flex><span>    parameters:
</span></span><span style=display:flex><span>      source:
</span></span><span style=display:flex><span>        - ./relative/path/to/file/in/vela/workspace
</span></span><span style=display:flex><span>        - a_user_name@some_remote_host_name:/absolute/path/on/remote/system
</span></span><span style=display:flex><span><span style=color:#00a000>+     target: scp://a_different_user@some_remote_host_name:12345/path
</span></span></span></code></pre></div><h3 id=passing-additional-scp-flags>Passing additional <code>scp</code> flags</h3><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-diff data-lang=diff><span style=display:flex><span>steps:
</span></span><span style=display:flex><span>  - name: override default scp flags
</span></span><span style=display:flex><span>    image: target/vela-scp:latest
</span></span><span style=display:flex><span>    pull: always
</span></span><span style=display:flex><span>    parameters:
</span></span><span style=display:flex><span>      source:
</span></span><span style=display:flex><span>        - ./relative/path/to/folder/in/vela/workspace
</span></span><span style=display:flex><span>      target: scp://a_different_user@some_remote_host_name:12345/path
</span></span><span style=display:flex><span><span style=color:#00a000>+     scp_flag:
</span></span></span><span style=display:flex><span><span style=color:#00a000>+       - &#34;-r&#34;
</span></span></span><span style=display:flex><span><span style=color:#00a000>+       - &#34;-o StrictHostKeyChecking=yes&#34;
</span></span></span></code></pre></div><h3 id=using-a-password-for-authentication>Using a password for authentication</h3><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-diff data-lang=diff><span style=display:flex><span>steps:
</span></span><span style=display:flex><span>  - name: password for authentication
</span></span><span style=display:flex><span>    image: target/vela-scp:latest
</span></span><span style=display:flex><span>    pull: always
</span></span><span style=display:flex><span><span style=color:#00a000>+   secrets:
</span></span></span><span style=display:flex><span><span style=color:#00a000>+     - source: my_non_user_account_password
</span></span></span><span style=display:flex><span><span style=color:#00a000>+       target: sshpass_password
</span></span></span><span style=display:flex><span><span style=color:#00a000></span>    parameters:
</span></span><span style=display:flex><span>      source:
</span></span><span style=display:flex><span>        - ./relative/path/to/file/in/vela/workspace
</span></span><span style=display:flex><span>      target: scp://a_different_user@some_remote_host_name:12345/path
</span></span></code></pre></div><h3 id=using-an-identity-file-without-a-passphrase-from-an-internal-secret>Using an identity file (WITHOUT a passphrase) from an internal secret</h3><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-diff data-lang=diff><span style=display:flex><span>steps:
</span></span><span style=display:flex><span>  - name: identity file contents from an internal secret
</span></span><span style=display:flex><span>    image: target/vela-scp:latest
</span></span><span style=display:flex><span>    pull: always
</span></span><span style=display:flex><span><span style=color:#00a000>+   secrets:
</span></span></span><span style=display:flex><span><span style=color:#00a000>+     - source: my_non_user_account_id_rsa_file_contents
</span></span></span><span style=display:flex><span><span style=color:#00a000>+       target: identity_file_contents
</span></span></span><span style=display:flex><span><span style=color:#00a000></span>    parameters:
</span></span><span style=display:flex><span>      source:
</span></span><span style=display:flex><span>        - ./relative/path/to/file/in/vela/workspace
</span></span><span style=display:flex><span>      target: scp://a_different_user@some_remote_host_name:12345/path
</span></span></code></pre></div><h3 id=using-an-identity-file-with-a-passphrase-from-an-internal-secret>Using an identity file (WITH a passphrase) from an internal secret</h3><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-diff data-lang=diff><span style=display:flex><span>steps:
</span></span><span style=display:flex><span>  - name: identity file contents with passphrase from an internal secret
</span></span><span style=display:flex><span>    image: target/vela-scp:latest
</span></span><span style=display:flex><span>    pull: always
</span></span><span style=display:flex><span><span style=color:#00a000>+   secrets:
</span></span></span><span style=display:flex><span><span style=color:#00a000>+     - source: my_non_user_account_id_rsa_file_contents
</span></span></span><span style=display:flex><span><span style=color:#00a000>+       target: identity_file_contents
</span></span></span><span style=display:flex><span><span style=color:#00a000>+     - source: my_non_user_account_id_rsa_passphrase
</span></span></span><span style=display:flex><span><span style=color:#00a000>+       target: sshpass_passphrase
</span></span></span><span style=display:flex><span><span style=color:#00a000></span>    parameters:
</span></span><span style=display:flex><span>      source:
</span></span><span style=display:flex><span>        - ./relative/path/to/file/in/vela/workspace
</span></span><span style=display:flex><span>      target: scp://a_different_user@some_remote_host_name:12345/path
</span></span></code></pre></div><h3 id=using-an-existing-identity-file-from-the-workspace>Using an existing identity file from the workspace</h3><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-diff data-lang=diff><span style=display:flex><span>steps:
</span></span><span style=display:flex><span>  - name: identity file from the workspace
</span></span><span style=display:flex><span>    image: target/vela-scp:latest
</span></span><span style=display:flex><span>    pull: always
</span></span><span style=display:flex><span>    parameters:
</span></span><span style=display:flex><span>      source:
</span></span><span style=display:flex><span>        - ./relative/path/to/file/in/vela/workspace
</span></span><span style=display:flex><span>      target: scp://a_different_user@some_remote_host_name:12345/path
</span></span><span style=display:flex><span><span style=color:#00a000>+     identity_file_path: ./some/workspace/location/id_rsa
</span></span></span></code></pre></div><h3 id=using-additional-secrets-in-other-parameters>Using additional secrets in other parameters</h3><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-diff data-lang=diff><span style=display:flex><span>steps:
</span></span><span style=display:flex><span>  - name: additional secrets in other parameters
</span></span><span style=display:flex><span>    image: target/vela-scp:latest
</span></span><span style=display:flex><span>    pull: always
</span></span><span style=display:flex><span><span style=color:#00a000>+   secrets:
</span></span></span><span style=display:flex><span><span style=color:#00a000>+     - source: some_secret_user
</span></span></span><span style=display:flex><span><span style=color:#00a000>+       target: secret_user
</span></span></span><span style=display:flex><span><span style=color:#00a000>+     - source: some_secret_host
</span></span></span><span style=display:flex><span><span style=color:#00a000>+       target: secret_host
</span></span></span><span style=display:flex><span><span style=color:#00a000>+     - source: some_secret_port
</span></span></span><span style=display:flex><span><span style=color:#00a000>+       target: secret_port
</span></span></span><span style=display:flex><span><span style=color:#00a000></span>    parameters:
</span></span><span style=display:flex><span>      source:
</span></span><span style=display:flex><span>        - ./relative/path/to/file/in/vela/workspace
</span></span><span style=display:flex><span><span style=color:#00a000>+     target: scp://$SECRET_USER@$SECRET_HOST:$SECRET_PORT/path
</span></span></span></code></pre></div><h3 id=using-the-container-without-the-plugin-logic>Using the container without the plugin logic</h3><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-diff data-lang=diff><span style=display:flex><span>steps:
</span></span><span style=display:flex><span>  - name: override plugin logic to use scp directly
</span></span><span style=display:flex><span>    image: target/vela-scp:latest
</span></span><span style=display:flex><span>    pull: always
</span></span><span style=display:flex><span><span style=color:#00a000>+   commands:
</span></span></span><span style=display:flex><span><span style=color:#00a000>+     - scp -i ./some/existing/id_rsa ./relative/path/to/file/in/vela/workspace username@hostname:/path/
</span></span></span></code></pre></div><h2 id=parameters--secrets>Parameters & Secrets</h2><blockquote><p><strong>NOTE:</strong></p><p>The plugin supports reading all parameters via environment variables or files.</p><p>Any values set from a file take precedence over values set from the environment.</p><p>Don&rsquo;t confuse the source/target syntax of native secrets with the source and target parameters required for the scp binary.</p></blockquote><table><thead><tr><th>Name</th><th>Description</th><th>Required</th><th>Accepts Multiple Values?</th><th>Default</th><th>Environment Variables</th><th>File Paths</th></tr></thead><tbody><tr><td><code>source</code></td><td>The source option from the <a href=https://man.openbsd.org/scp><code>scp</code> manual</a>.</td><td>✅</td><td>✅</td><td></td><td><code>PARAMETER_SOURCE</code><br><code>SOURCE</code></td><td><code>/vela/parameters/vela-scp/source</code><br><code>/vela/secrets/vela-scp/source</code></td></tr><tr><td><code>target</code></td><td>The target option from the <a href=https://man.openbsd.org/scp><code>scp</code> manual</a>.</td><td>✅</td><td>❌</td><td></td><td><code>PARAMETER_TARGET</code><br><code>TARGET</code></td><td><code>/vela/parameters/vela-scp/target</code><br><code>/vela/secrets/vela-scp/target</code></td></tr><tr><td><code>identity_file_path</code></td><td>A path for where the <a href=https://man.openbsd.org/scp><code>scp</code></a> binary should look for existing identity files.<br>These are NOT auto created by the plugin as they must be created and managed by a user and only referenced here.</td><td>❌</td><td>✅</td><td></td><td><code>PARAMETER_IDENTITY_FILE_PATH</code><br><code>IDENTITY_FILE_PATH</code><br><code>PARAMETER_SSH_KEY_PATH</code><br><code>SSH_KEY_PATH</code></td><td><code>/vela/parameters/vela-scp/identity-file.path</code><br><code>/vela/secrets/vela-scp/identity-file.path</code></td></tr><tr><td><code>identity_file_contents</code></td><td>The raw contents of an identity file for use with <a href=https://man.openbsd.org/scp><code>scp</code></a>.<br>The plugin will take the raw contents and place it in a temporary location in the workspace with the correct permissions and inject it as an identity file to use during execution.</td><td>❌</td><td>❌</td><td></td><td><code>PARAMETER_IDENTITY_FILE_CONTENTS</code><br><code>IDENTITY_FILE_CONTENTS</code><br><code>PARAMETER_SSH_KEY</code><br><code>SSH_KEY</code></td><td><code>/vela/parameters/vela-scp/identity-file.contents</code><br><code>/vela/secrets/vela-scp/identity-file.contents</code></td></tr><tr><td><code>scp_flag</code></td><td>Any additional options from the <a href=https://man.openbsd.org/scp><code>scp</code> manual</a>.<br>These will override the default options and be placed between the identity file options and the source/target options at the end.</td><td>❌</td><td>✅</td><td><code>-o StrictHostKeyChecking=no</code><br><code>-o UserKnownHostsFile=/dev/null</code></td><td><code>PARAMETER_SCP_FLAG</code><br><code>SCP_FLAG</code></td><td><code>/vela/parameters/vela-scp/scp.flag</code><br><code>/vela/secrets/vela-scp/scp.flag</code></td></tr><tr><td><code>sshpass_password</code></td><td>If any systems require a password for authentication it can be specified here, and the <a href=https://linux.die.net/man/1/sshpass><code>sshpass</code></a> binary will be used in conjunction with <a href=https://man.openbsd.org/scp><code>scp</code></a>.</td><td>❌</td><td>❌</td><td></td><td><code>PARAMETER_SSHPASS_PASSWORD</code><br><code>PARAMETER_PASSWORD</code><br><code>SSHPASS_PASSWORD</code><br><code>PASSWORD</code></td><td><code>/vela/parameters/vela-scp/sshpass.password</code><br><code>/vela/secrets/vela-scp/sshpass.password</code></td></tr><tr><td><code>sshpass_passphrase</code></td><td>If any identity files require a passphrase for authentication it can be specified here, and the <a href=https://linux.die.net/man/1/sshpass><code>sshpass</code></a> binary will be used in conjunction with <a href=https://man.openbsd.org/scp><code>scp</code></a>.</td><td>❌</td><td>❌</td><td></td><td><code>PARAMETER_SSHPASS_PASSPHRASE</code><br><code>SSHPASS_PASSPHRASE</code></td><td><code>/vela/parameters/vela-scp/sshpass.passphrase</code><br><code>/vela/secrets/vela-scp/sshpass.passphrase</code></td></tr><tr><td><code>sshpass_flag</code></td><td>Any additional options from the <a href=https://linux.die.net/man/1/sshpass><code>sshpass</code> manual</a>.</td><td>❌</td><td>✅</td><td></td><td><code>PARAMETER_SSHPASS_FLAG</code><br><code>SSHPASS_FLAG</code></td><td><code>/vela/parameters/vela-scp/sshpass.flag</code><br><code>/vela/secrets/vela-scp/sshpass.flag</code></td></tr></tbody></table><div class="text-muted mt-5 pt-3 border-top">Last modified March 8, 2022: <a href=https://github.com/go-vela/docs/commit/fe29de8fe5e7cd72640caaeb08d7e459e22ee6bc>feat(openssh): Add SSH & SCP documentation (#287) (fe29de8f)</a></div></div></main></div></div><footer class="bg-dark py-5 row d-print-none"><div class="container-fluid mx-sm-5"><div class=row><div class="col-6 col-sm-4 text-xs-center order-sm-2"></div><div class="col-6 col-sm-4 text-right text-xs-center order-sm-3"><ul class="list-inline mb-0"><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=GitHub aria-label=GitHub><a class=text-white target=_blank href=https://github.com/go-vela><i class="fab fa-github"></i></a></li><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=Slack aria-label=Slack><a class=text-white target=_blank href="https://gophers.slack.com/app_redirect?channel=CNRRKE8KY"><i class="fab fa-slack"></i></a></li><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title="Developer mailing list" aria-label="Developer mailing list"><a class=text-white target=_blank href=mailto:vela@target.com><i class="fa fa-envelope"></i></a></li></ul></div><div class="col-12 col-sm-4 text-center py-2 order-sm-2"><small class=text-white>&copy; 2022 Target Brands All Rights Reserved</small>
<small class=ml-1><a href=https://github.com/go-vela/server/blob/master/LICENSE target=_blank>Privacy Policy</a></small></div></div></div></footer></div><script src=https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js integrity=sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49 crossorigin=anonymous></script>
<script src=https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js integrity=sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy crossorigin=anonymous></script>
<script src=/docs/js/main.min.7a71bafd3fa8b6fc0a69d44088ed34c9fad67cd3fa093a1f02a9fa6850b16a1c.js integrity="sha256-enG6/T+otvwKadRAiO00yfrWfNP6CTofAqn6aFCxahw=" crossorigin=anonymous></script></body></html>